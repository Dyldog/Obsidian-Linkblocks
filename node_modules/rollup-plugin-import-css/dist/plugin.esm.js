/* Copyright (c) 2021 Outwalk Studios */
import{createFilter as e}from"@rollup/pluginutils";import r from"fs";import t from"path";export default(n={})=>{n.transform||(n.transform=e=>e);const s=n.alwaysOutput||!1,a=[],o=["**/*.css"].concat(n.include||[]),i=e(o,n.exclude||[]);return{name:"import-css",load(e){if(i(e))return r.readFileSync(e,"utf8")},transform(e,r){if(!i(r))return;const t=n.minify?n.transform(e).replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!"):n.transform(e);return a[r]=t,{code:`export default ${JSON.stringify(t)};`,map:{mappings:""}}},generateBundle(e,r){for(let e in r){let o=Array.isArray(r[e].modules)?r[e].modules:Object.getOwnPropertyNames(r[e].modules),i=Object.entries(a).sort(((e,r)=>o.indexOf(e[0])-o.indexOf(r[0]))).map((t=>{if(!r[e].modules[t[0]])return t[1]})).join("\n");if(i.trim().length<=0&&!s)return;const l=n.output||`${t.basename(e,t.extname(e))}.css`;this.emitFile({type:"asset",fileName:l,source:i})}}}};
