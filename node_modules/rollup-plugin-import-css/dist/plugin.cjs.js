/* Copyright (c) 2021 Outwalk Studios */
"use strict";var e=require("@rollup/pluginutils"),r=require("fs"),t=require("path");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=a(r),s=a(t);module.exports=(r={})=>{r.transform||(r.transform=e=>e);const t=r.alwaysOutput||!1,a=[],u=["**/*.css"].concat(r.include||[]),l=e.createFilter(u,r.exclude||[]);return{name:"import-css",load(e){if(l(e))return n.default.readFileSync(e,"utf8")},transform(e,t){if(!l(t))return;const n=r.minify?r.transform(e).replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!"):r.transform(e);return a[t]=n,{code:`export default ${JSON.stringify(n)};`,map:{mappings:""}}},generateBundle(e,n){for(let e in n){let u=Array.isArray(n[e].modules)?n[e].modules:Object.getOwnPropertyNames(n[e].modules),l=Object.entries(a).sort(((e,r)=>u.indexOf(e[0])-u.indexOf(r[0]))).map((r=>{if(!n[e].modules[r[0]])return r[1]})).join("\n");if(l.trim().length<=0&&!t)return;const i=r.output||`${s.default.basename(e,s.default.extname(e))}.css`;this.emitFile({type:"asset",fileName:i,source:l})}}}};
